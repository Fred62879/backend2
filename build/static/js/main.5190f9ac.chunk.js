(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{19:function(e,t,n){},28:function(e,t,n){e.exports=n(39)},33:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(16),s=n.n(o),i=(n(33),n(3)),c=n(4),u=n(6),l=n(5),m=(n(19),n(14)),p=n(25),E={INI_RECEIVE:"INI_RECEIVE",ITEM_RECEIVE:"ITEM_RECEIVE",ITEM_LOADING:"ITEM_LOADING",MESS_INPUT:"MESS_INPUT",MESS_UPDATE:"MESS_UPDATE",MESS_UPDATE_INPUT:"MESS_UPDATE_INPUT",MESS_ADD:"MESS_ADD",MESS_CLEAR:"MESS_CLEAR",MESS_DISPLAY:"MESS_DISPLAY",REDIRECT:"REDIRECT",RSREDIRECT:"RSREDIRECT",DETAIL_VIEW:"DETAIL_VIEW",LOGIN:"Login"},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Your message comes here!",t=arguments.length>1?arguments[1]:void 0;return t.type===E.MESS_INPUT?t.input:e},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Your can input your new message here!",t=arguments.length>1?arguments[1]:void 0;return t.type===E.MESS_UPDATE_INPUT?t.input:e},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E.REDIRECT:return t.link;case E.RSREDIRECT:return"";default:return e}},b=n(27),v={messes:[],item:{},itemloading:!0},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0,n=Object.assign({},e);switch(t.type){case E.INI_RECEIVE:return n.messes=t.messes,n;case E.ITEM_RECEIVE:return console.log(t.messitem),n.item=t.messitem,n.itemloading=!1,n;case E.ITEM_LOADING:return n.itemloading=!0,n;case E.MESS_ADD:var a={id:t.id,mess:t.newmess,username:t.username};return n.messes=[].concat(Object(b.a)(e.messes),[a]),n;case E.MESS_CLEAR:return n.messes=t.messes,n.item=t.messitem,n;default:return e}},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return t.type===E.MESS_DISPLAY?t.displayCho:e},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===E.DETAIL_VIEW?t.content:e},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"fred",t=arguments.length>1?arguments[1]:void 0;return t.type===E.Login?t.username:e},j=Object(m.d)(Object(m.c)({input:h,uinput:d,contents:g,displayCho:I,detail:S,link:f,username:y}),Object(m.a)(p.a)),O=n(10),C=n(12),_=n(2),M=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{class:"container"},r.a.createElement("ul",{class:"nav"},r.a.createElement("li",null,r.a.createElement(C.b,{class:"link",to:"/"},"Message")),r.a.createElement("li",null,r.a.createElement(C.b,{class:"link",to:"/about"},"About"))),r.a.createElement("div",null,this.props.children))}}]),n}(r.a.Component),T=function(e,t,n,a,r,o){return{type:e,messes:t,messitem:n,id:a,newmess:r,username:o}};function D(){return function(e){return fetch("http://localhost:3001/messages").then((function(e){return e.json()})).then((function(t){return e(T(E.INI_RECEIVE,t.data,{},"","","")),t.data})).catch((function(e){console.log(e)}))}}function R(e){return function(t){return fetch("/messages/detail/".concat(e)).then((function(e){return e.json()})).then((function(e){console.log("fetch"),console.log(e),t(T(E.ITEM_RECEIVE,[],e.data,"","",""))})).catch((function(e){console.log("ERROR"+e)}))}}var k=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._onChange=function(t){e.props.load(t.target.value)},e._onSubmit=function(t){t.preventDefault(),e.props.postMessItem(e.props.input,"Anynoumous")},e}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement("form",{id:"messform"},r.a.createElement("h4",null,"Your input is: ",this.props.input),r.a.createElement("textarea",{id:"newmess",onChange:this._onChange,placeholder:"Your message comes here!"}),r.a.createElement("br",null),r.a.createElement("button",{id:"submit",onClick:this._onSubmit},"Submit"),r.a.createElement("input",{type:"reset",defaultValue:"Reset"}))}}]),n}(r.a.Component),A=Object(O.b)((function(e){return{contents:e.contents,input:e.input}}),{load:function(e){return{type:E.MESS_INPUT,input:e}},store:T,postMessItem:function(e,t){return function(n){return fetch("/messages",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:"",mess:e,username:t})}).then((function(e){if(e.ok)return e.json();throw Error(e.statusText)})).then((function(e){n(T(E.MESS_ADD,[],{},e.data.id,e.data.mess,e.data.username))})).catch((function(e){return console.log(e)}))}}})(k),w=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this.props.id;return r.a.createElement("div",null,r.a.createElement("li",{class:"messageli"},r.a.createElement("div",{class:"item1"},this.props.mess),r.a.createElement("div",{class:"item1"},r.a.createElement("i",null,"(",this.props.username,")")),r.a.createElement("div",{class:"item2"},r.a.createElement(C.b,{class:"link",to:"/messages/detail/".concat(e)},"More Detail")),r.a.createElement("div",{class:"item2"},r.a.createElement(C.b,{class:"link",to:"/messages/update/".concat(e)},"Editing"))),r.a.createElement("br",null))}}]),n}(a.Component),L=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.props.dispatch(D())}},{key:"render",value:function(){var e=[];1===this.props.dc&&(e=this.props.contents.messes);var t=e.map((function(e){return r.a.createElement(w,{id:e.id,mess:e.mess,username:e.username})}));return r.a.createElement("div",null,r.a.createElement("ul",{id:"messages"},t))}}]),n}(a.Component),P=Object(O.b)((function(e){return{dc:e.displayCho,contents:e.contents}}),(function(e){return{fetchMessages:D,dispatch:e}}))(L),N=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._onShow=function(t){e.props.display(1)},e._onClear=function(t){e.props.store("MESS_CLEAR",[],{},"","")},e}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{id:"messarea"},r.a.createElement("h4",null,"All your messages"),r.a.createElement("button",{onClick:this._onShow},"Show"),r.a.createElement("button",{onClick:this._onClear},"Clear"),r.a.createElement(P,null))}}]),n}(r.a.Component),U=Object(O.b)((function(e){return{dc:e.displayCho,contents:e.contents}}),{display:function(e){return{type:E.MESS_DISPLAY,displayCho:e}},store:T})(N),V=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(A,null),r.a.createElement(U,null))}}]),n}(r.a.Component),Y=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{id:"text"},r.a.createElement("p",null,"Hi there, I am Zhuoting Xie, a firt year BCS student. I study in UBC and am looking for co-op internships right now."),r.a.createElement("p",null,"This website is the message list website for CPSC436I class. You can store your messages and update it to the historical message form."))}}]),n}(r.a.Component),x=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Message Detail"),r.a.createElement("p",null,"Hi there, the message stored is ",this.props.data.mess),r.a.createElement("p",null,"It is written by ",this.props.data.username))}}]),n}(a.Component),W=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"componentDidMount",value:function(){console.log("MESSARTICLE"),this.props.dispatch(R(this.props.match.params.id))}},{key:"render",value:function(){var e=this.props.messItem,t=this.props.itemLoading;return r.a.createElement("div",null,r.a.createElement("ul",null,t?r.a.createElement("div",null,"Loading"):r.a.createElement(x,{data:e})))}}]),n}(a.Component),B=Object(O.b)((function(e){return{messItem:e.contents.item,itemLoading:e.contents.itemloading}}))(W),G=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._onChange=function(t){e.props.uload(t.target.value)},e._onSubmit=function(t){t.preventDefault(),e.props.updateMessItem(e.props.uinput,e.props.match.params.id),e.props.uload(""),e.props.redirect(E.REDIRECT,"/")},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchMessItem(this.props.match.params.id)}},{key:"render",value:function(){var e=this.props.messItem;if(""!==this.props.link){var t=this.props.link;return this.props.redirect(E.RSREDIRECT,""),console.log(t),r.a.createElement(_.a,{to:t})}return r.a.createElement("div",null,r.a.createElement("p",null,"Your original message is ",e.mess),r.a.createElement("form",{id:"updateform"},r.a.createElement("h4",null,"Your input is: ",this.props.uinput),r.a.createElement("textarea",{id:"newmess",onChange:this._onChange,placeholder:"Your can input your new message here!"}),r.a.createElement("br",null),r.a.createElement("button",{id:"submit",onClick:this._onSubmit},"Submit"),r.a.createElement("input",{type:"reset",defaultValue:"Reset"})))}}]),n}(a.Component),J=Object(O.b)((function(e){return{messItem:e.contents.item,uinput:e.uinput,link:e.link}}),{uload:function(e){return{type:E.MESS_UPDATE_INPUT,input:e}},redirect:function(e,t){return{type:e,link:t}},fetchMessItem:R,updateMessItem:function(e,t){return function(n){return fetch("/messages/update/".concat(t),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({mess:e})}).then((function(e){if(e.ok)return e.json();throw Error(e.statusText)})).then((function(e){D()})).catch((function(e){return console.log(e)}))}}})(G),H=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement(O.a,{store:j},r.a.createElement(C.a,null,r.a.createElement(M,null,r.a.createElement(_.b,{exact:!0,path:"/",component:V}),r.a.createElement(_.b,{path:"/about",component:Y}),r.a.createElement(_.b,{path:"/messages/detail/:id",component:B}),r.a.createElement(_.b,{path:"/messages/update/:id",component:J}))))}}]),n}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[28,1,2]]]);
//# sourceMappingURL=main.5190f9ac.chunk.js.map